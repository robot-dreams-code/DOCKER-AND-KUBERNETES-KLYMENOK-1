Основи Docker
------------
### 1.1 Rancher Desktop

Мені вдалося без проблем встановити **[Rancher Desktop](https://github.com/rancher-sandbox/rancher-desktop/releases)** скачавши і запустивши dmg файл.
Єдина помилка яку я отримав була пов'язана із **Kubernetes** і паралельно встановленим **Docker Desktop**. 
Нижче наведено рішення яку спрацювало.

~~~zsh
kubectl config get-contexts # вивести список доступних контекстів
kubectl config use-context rancher-desktop # якщо обрано не rancher-desktop то обираємо його
~~~

Після запуску **Rerun** на вкладці **Diagnostics**, помилка зникла.


### 2.1 Запуск першого контейнера

Для запуску першого контейнера я обрав образ nginx, т.к. він використовуватиметься далі в цьому завданні.

~~~zsh
docker image pull nginx:latest
docker run --name nginx -p 8000:80 nginx
~~~

При переході на http://localhost:8000/ бачимо **Welcome** сторінку. У **Rancher Desktop** також з'явилися відповідний образ і контейнер.
З контейнером можна взаємодіяти як із **Rancher Desktop**, так і за допомогою командного рядка:

~~~zsh
docker stop nginx # зупинка контейнера за присвоєним ім'ям
docker start nginx # запуск існуючого контейнера за присвоєним ім'ям
~~~

### 3.1 Множинний запуск контейнерів. Імперативно

У якості прикладу імперативного підходу взаємодії із контейнерами, наведено скрипт **composeless.sh**.

~~~zsh
./composeless.sh -h
Usage: ./composeless.sh run nginx 8000 80 10
       ./composeless.sh start nginx 10
       ./composeless.sh stop nginx 10
       ./composeless.sh rm nginx 10
~~~

Цей скрипт дозволяє створювати, запускати, зупиняти, або видаляти певну кількість контейнерів на основі вказаного образу.
Це хоч і автоматизований, але доволі прямолінійний підхід який не є бажаним у більш складних задачах. 
Т.к. зміни в інфраструктурі напряму впливають на подібні сценарії, а це потребує часу на їх підтримку.

### 3.1 Множинний запуск контейнерів. Декларативно

Декларативний підхід найпростіше продемонструвати на прикладі файлу **docker-compose.yaml**. 
Цей файл містить саме опис інфраструктури багатоконтейнерного застосунку або впринципі будь-чого що потребує автоматизований множинний запуск контейнерів.

~~~yaml
version: '3.8'
services:
  nginx_service:
    image: nginx:latest
    ports:
      - "8000-8009:80"
~~~

Команда для запуску:
~~~zsh
docker compose up -d --scale nginx=10
~~~

Флаг -d означає запустити контейнери у фоновому режимі Detached Mode, --scale дозволяє вказати кількість реплік для вказаного сервісу у нашому випадку це 10 інстансів nginx. Після запуску команди, при переході за адресою localhost на будь-який із портів у діапазоні 8000-8009, бачимо **Welcome** сторінку. 

Команда для зупинки:
~~~zsh
docker compose down
~~~