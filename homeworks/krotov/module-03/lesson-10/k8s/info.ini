
# check if defai;t StprageClass available 
PS C:\Users\kisyapisya> kubectl get sc
NAME                   PROVISIONER             RECLAIMPOLICY   VOLUMEBINDINGMODE      ALLOWVOLUMEEXPANSION   AGE
local-path (default)   rancher.io/local-path   Delete          WaitForFirstConsumer   false                  12d

# listing created PVC and PV for Redis app 

PS C:\Users\username> kubectl get pv
NAME                                       CAPACITY   ACCESS MODES   RECLAIM POLICY   STATUS   CLAIM                                      STORAGECLASS   VOLUMEATTRIBUTESCLASS   REASON   AGE
pvc-849c354d-adf3-4eae-9668-6db0d1feb40e   1Gi        RWO            Delete           Bound    krotovhh/redis-data-redis7-statefulset-0   local-path     <unset>                          34m

PS C:\Users\username> kubectl get pvc -n krotovhh
NAME                              STATUS   VOLUME                                     CAPACITY   ACCESS MODES   STORAGECLASS   VOLUMEATTRIBUTESCLASS   AGE
redis-data-redis7-statefulset-0   Bound    pvc-849c354d-adf3-4eae-9668-6db0d1feb40e   1Gi        RWO            local-path     <unset>                 34m

# checking for path of the PV on the Kubernetes node
PS C:\Users\username> kubectl describe pv pvc-849c354d-adf3-4eae-9668-6db0d1feb40e
Name:              pvc-849c354d-adf3-4eae-9668-6db0d1feb40e
Labels:            <none>
Annotations:       local.path.provisioner/selected-node: desktop-6sjs9rr
                   pv.kubernetes.io/provisioned-by: rancher.io/local-path
Finalizers:        [kubernetes.io/pv-protection]
StorageClass:      local-path
Status:            Bound
Claim:             krotovhh/redis-data-redis7-statefulset-0
Reclaim Policy:    Delete
Access Modes:      RWO
VolumeMode:        Filesystem
Capacity:          1Gi
Node Affinity:
  Required Terms:
    Term 0:        kubernetes.io/hostname in [desktop-6sjs9rr]
Message:
Source:
    Type:  LocalVolume (a persistent volume backed by local storage on a node)
    Path:  /var/lib/rancher/k3s/storage/pvc-849c354d-adf3-4eae-9668-6db0d1feb40e_krotovhh_redis-data-redis7-statefulset-0
Events:    <none>


PS C:\Users\username> kubectl describe pvc redis-data-redis7-statefulset-0 -n krotovhh
Name:          redis-data-redis7-statefulset-0
Namespace:     krotovhh
StorageClass:  local-path
Status:        Bound
Volume:        pvc-849c354d-adf3-4eae-9668-6db0d1feb40e
Labels:        app=redis7
Annotations:   pv.kubernetes.io/bind-completed: yes
               pv.kubernetes.io/bound-by-controller: yes
               volume.beta.kubernetes.io/storage-provisioner: rancher.io/local-path
               volume.kubernetes.io/selected-node: desktop-6sjs9rr
               volume.kubernetes.io/storage-provisioner: rancher.io/local-path
Finalizers:    [kubernetes.io/pvc-protection]
Capacity:      1Gi
Access Modes:  RWO
VolumeMode:    Filesystem
Used By:       redis7-statefulset-0
Events:
  Type    Reason                 Age                From                                                                                                Message
  ----    ------                 ----               ----                                                                                                -------
  Normal  WaitForFirstConsumer   35m                persistentvolume-controller                                                                         waiting for first consumer to be created before binding
  Normal  ExternalProvisioning   35m (x2 over 35m)  persistentvolume-controller                                                                         Waiting for a volume to be created either by the external provisioner 'rancher.io/local-path' or manually by the system administrator. If volume creation is delayed, please verify that the provisioner is running and correctly registered.
  Normal  Provisioning           35m                rancher.io/local-path_local-path-provisioner-774c6665dc-pjcfn_2d0d27a7-0339-443f-a8db-e19c66dd47f4  External provisioner is provisioning volume for claim "krotovhh/redis-data-redis7-statefulset-0"
  Normal  ProvisioningSucceeded  35m                rancher.io/local-path_local-path-provisioner-774c6665dc-pjcfn_2d0d27a7-0339-443f-a8db-e19c66dd47f4  Successfully provisioned volume pvc-849c354d-adf3-4eae-9668-6db0d1feb40e


# listing added to deployment APP variables 

PS C:\Users\username> kubectl exec -n krotovhh -it python-course-app-lesson10-deployment-74c9764c56-lvksl -- /bin/bash
root@python-course-app-lesson10-deployment-74c9764c56-lvksl:/app# printenv | grep APP
APP_MESSAGE=Welcome to the Course Application!
APP_REDIS_URL=redis://redis7:6379
APP_STORE=redis



